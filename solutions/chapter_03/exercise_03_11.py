# An explaination of the loop condition can be found in the notes.

from math import ceil

def exp_approx(x):
    y = 1       # current approx
    d = 6       # number of digits
    n = 1       # current iteration
    fac = 1     # n!
    m = ceil(x)
    if x >= 0:
        while fac < (3**m) * (x**(n+1)) * 10**d:
            y += x**n / fac
            n += 1  
            fac *= n
    if x < 0:
        while fac < ((-x)**(n+1)) * 10**d:
            y += x**n / fac
            n += 1  
            fac *= n
    return y



# We compare our approximation to the standard implementation from the math package:

from math import exp

print("Comparison of exp_approx(x) and exp(x) up to 7 digits.")
print("{:>3s}   {:>22s}   {:>22s}   {:13s}".format("x","approximation","exact","difference (10 digits)"))
for x in range(-30,31):
    approx = exp_approx(x)
    exact = exp(x)
    print("{:3d}   {:22.7f}   {:22.7f}   {:13.10f}".format(x, approx, exact, exact-approx))

### OUTPUT:
#   Comparison of exp_approx(x) and exp(x) up to 7 digits.
#     x            approximation                    exact   difference (10 digits)
#   -30               -0.0000855                0.0000000    0.0000855145
#   -29                0.0000551                0.0000000   -0.0000550745
#   -28                0.0000050                0.0000000   -0.0000050079
#   -27               -0.0000045                0.0000000    0.0000044619
#   -26               -0.0000014                0.0000000    0.0000013633
#   -25               -0.0000006                0.0000000    0.0000006464
#   -24               -0.0000003                0.0000000    0.0000002671
#   -23               -0.0000000                0.0000000    0.0000000403
#   -22               -0.0000000                0.0000000    0.0000000071
#   -21               -0.0000000                0.0000000    0.0000000192
#   -20                0.0000000                0.0000000   -0.0000000297
#   -19                0.0000000                0.0000000   -0.0000000097
#   -18               -0.0000000                0.0000000    0.0000000172
#   -17                0.0000001                0.0000000   -0.0000000226
#   -16                0.0000001                0.0000001    0.0000000296
#   -15                0.0000003                0.0000003   -0.0000000394
#   -14                0.0000008                0.0000008    0.0000000522
#   -13                0.0000022                0.0000023    0.0000000187
#   -12                0.0000062                0.0000061   -0.0000000242
#   -11                0.0000167                0.0000167    0.0000000310
#   -10                0.0000454                0.0000454   -0.0000000392
#    -9                0.0001234                0.0001234    0.0000000487
#    -8                0.0003355                0.0003355   -0.0000000590
#    -7                0.0009118                0.0009119    0.0000000692
#    -6                0.0024788                0.0024788   -0.0000000773
#    -5                0.0067379                0.0067379    0.0000000800
#    -4                0.0183157                0.0183156   -0.0000000728
#    -3                0.0497870                0.0497871    0.0000000522
#    -2                0.1353351                0.1353353    0.0000001657
#    -1                0.3678792                0.3678794    0.0000002525
#     0                1.0000000                1.0000000    0.0000000000
#     1                2.7182815                2.7182818    0.0000003029
#     2                7.3890561                7.3890561    0.0000000286
#     3               20.0855369               20.0855369    0.0000000112
#     4               54.5981500               54.5981500    0.0000000033
#     5              148.4131591              148.4131591    0.0000000008
#     6              403.4287935              403.4287935    0.0000000002
#     7             1096.6331584             1096.6331584    0.0000000000
#     8             2980.9579870             2980.9579870    0.0000000000
#     9             8103.0839276             8103.0839276    0.0000000000
#    10            22026.4657948            22026.4657948    0.0000000000
#    11            59874.1417152            59874.1417152    0.0000000000
#    12           162754.7914190           162754.7914190    0.0000000001
#    13           442413.3920089           442413.3920089    0.0000000001
#    14          1202604.2841648          1202604.2841648   -0.0000000005
#    15          3269017.3724721          3269017.3724721    0.0000000000
#    16          8886110.5205079          8886110.5205079    0.0000000000
#    17         24154952.7535753         24154952.7535753   -0.0000000075
#    18         65659969.1373305         65659969.1373305    0.0000000000
#    19        178482300.9631872        178482300.9631872    0.0000000000
#    20        485165195.4097902        485165195.4097903    0.0000001192
#    21       1318815734.4832141       1318815734.4832146    0.0000004768
#    22       3584912846.1315928       3584912846.1315918   -0.0000009537
#    23       9744803446.2489052       9744803446.2489033   -0.0000019073
#    24      26489122129.8434715      26489122129.8434715    0.0000000000
#    25      72004899337.3858795      72004899337.3858795    0.0000000000
#    26     195729609428.8387451     195729609428.8387756    0.0000305176
#    27     532048240601.7988281     532048240601.7986450   -0.0001831055
#    28    1446257064291.4738770    1446257064291.4750977    0.0012207031
#    29    3931334297144.0424805    3931334297144.0419922   -0.0004882812
#    30   10686474581524.4667969   10686474581524.4628906   -0.0039062500
